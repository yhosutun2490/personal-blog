---
title: Vue Create App and Mount
date: 2024-09-15
description: ä»‹ç´¹Vueçš„èµ·æ‰‹å¼å’ŒCreate Appæ˜¯ä»€éº¼ï¼ŒVueçš„ç·¨è­¯å’ŒåŸ·è¡Œæ ¸å¿ƒåˆæ­¥ä»‹ç´¹ã€‚
image: /iron/iron-1-1.jpg
alt: Vue-Create-App-and-Mount
ogImage: /iron/iron-1-1.jpg
tags: ['Vue','éµäººè³½']
published: true
---
<!-- ## èµ·å› 

å—¨~å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Rafaelï¼Œå¾åŸæœ¬çš„è¾²æ¥­é ˜åŸŸè½‰è·å‰›æ»¿1å¹´ï¼Œç›®å‰åœ¨AIæ•¸æ“šå…¬å¸æ“”ä»»å‰ç«¯å·¥ç¨‹å¸«ã€‚

æœ€è¿‘è‡ªå·±ç±Œçµ„çš„Vue3ç·šä¸Šè®€æ›¸æœƒé †åˆ©çµæŸäº†ğŸ¥³ï¼Œä¹Ÿå‰›å¥½æ˜¯ä»¥Vue3é–‹ç™¼å¿«è¿‘1å¹´æ™‚é–“ï¼Œæƒ³èªªæ•´ç†è‡ªå·±æ’°å¯«çš„Vueè®€æ›¸æœƒç¶±è¦ï¼Œä¸¦å°‡å„ä¸»é¡Œå†æ·±å…¥æ¢è¨æ’°å¯«æˆæ–‡ç« ï¼Œæœƒæƒ³ç™¼èµ·é€™å€‹å¿ƒé¡˜ä¸»è¦ä¸€ç›´å¿ƒä¸­æœ‰å€‹åŸå› :

Vueçš„å®˜ç¶²å…¶å¯¦å°ä½¿ç”¨è€…æ»¿å¥½ä¸Šæ‰‹çš„ï¼Œæ­£å› ç‚ºå¦‚æ­¤ï¼Œè¨±å¤šé–‹ç™¼ä¸Šç´°ç¯€æˆ–å’Œæ­£ç¢ºè§€å¿µæˆ‘å€‘ä¸å¾—è€ŒçŸ¥ã€‚ä¹Ÿå°±é€ æˆè¨±å¤šåˆå­¸é–‹ç™¼è€…(åŒ…æ‹¬æœ¬äºº)ï¼ŒçŸ¥å…¶ç„¶è€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œäº‚ç”¨ç”¢ç”Ÿbugè€Œä¸å¾—å…¶è§£çš„æƒ…æ³å‡ºç¾ã€‚

å¤§æ¦‚æœƒä»¥å®˜ç¶²ä¸€äº›åŸºæœ¬ä»‹ç´¹ç‚ºåŸºåº•ï¼ŒåŠ å…¥é¡å¤–æ–‡ç« è³‡æºï¼Œä¹Ÿæœƒå˜—è©¦åŠ å…¥ä¸€äº›SOLIDè¨­è¨ˆæº–å‰‡ï¼Œå¸Œæœ›å½¢æˆä¸€äº›ç«èŠ±çœ‹çœ‹ï¼Œç¬¬ä¸€æ¬¡åƒåŠ éµäººè³½ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶é–±è®€æ™‚èƒ½å¤ çµ¦äºˆå›é¥‹ï¼Œæ•™å­¸ç›¸é•·ã€‚ -->

## Vue Create Appå’ŒApp.mountæ˜¯ä»€éº¼?

* æˆ‘å€‘æœƒçœ‹åˆ°å®˜ç¶²èµ·æ‰‹å¼ï¼Œæœƒå…ˆ import Vue å¥—ä»¶ä¸­çš„createAppå‡½å¼ï¼Œä¸¦æ›è¼‰ä¸€å€‹App.vueç‚ºé ‚å±¤æ ¹çµ„ä»¶ï¼Œå…¶å¯¦createAppç®—æ˜¯æ•´å€‹Vueæ‡‰ç”¨ç¨‹å¼çš„é€²å…¥é»ï¼Œæœƒé–‹å§‹ä¸€ç³»åˆ—çš„å…§éƒ¨åˆå§‹åŒ–å‹•ä½œã€‚
[å®˜ç¶²é€£çµ](https://cn.vuejs.org/api/application.html){:target="_blank" rel="noopener noreferrer"}

```js [file.js]{2} meta-info=val
import { createApp } from 'vue'
// import the root component App from a single-file component.
import App from './App.vue'
const app = createApp(App)
```

åœ¨å°ˆæ¡ˆçµæ§‹ä¸Šï¼Œä¸€å€‹[å–®é å¼æ‡‰ç”¨(Single Page Application, SPA)](https://www.explainthis.io/zh-hant/swe/spa){:target="_blank" rel="noopener noreferrer"}å°ˆæ¡ˆçµæ§‹ï¼Œåº•ä¸‹å¯åŒ…å«æ›´å¤šVueå­å…ƒä»¶:

```
App (root component)
â”œâ”€ TodoList
â”‚  â””â”€ TodoItem
â”‚     â”œâ”€ TodoDeleteButton
â”‚     â””â”€ TodoEditButton
â””â”€ TodoFooter
   â”œâ”€ TodoClearButton
   â””â”€ TodoStatistics
```

## Mount the App

**Mount**ï¼Œé¡§åæ€ç¾©æ›è¼‰çš„æ„æ€ï¼ŒVueå…¶å¯¦æ˜¯ä¸€å€‹å¤§å‹JSå¥—ä»¶åŒ…ï¼Œå¯ä»¥æƒ³åƒæˆæœ€çµ‚é‚„æ˜¯è¦å°‡é€™äº›JSç”¢ç‰©ï¼Œæ›åˆ°ç€è¦½å™¨é€™å€‹é‹è¡Œç’°å¢ƒ(runtime)åŸ·è¡Œã€‚
å®˜æ–¹ä¹Ÿæœƒæåˆ° **app.mount** é€™å€‹æ–¹æ³•çš„èª¿ç”¨æ‡‰è©²åœ¨æ•´ä¸ªæ‡‰ç”¨é…ç½®å’Œå…¶ä»–è³‡æºæ³¨å†Œå®Œæˆå¾Œæ‰è¢«è°ƒç”¨ã€‚
é€™å¥è©±æ„æ€æ˜¯èªªï¼Œå¦‚æœæœ‰ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶æˆ–æ˜¯è¨»å†Šæ ¹çµ„ä»¶ï¼Œ**app.mount æ‡‰è©²æ“ºåœ¨å…¥å£æª”æ¡ˆ index.js æª”æ¡ˆä¸­æœ€å¾Œä¸€æ®µåŸ·è¡Œ**ï¼Œç¢ºä¿æ›è¼‰åˆ°ç€è¦½å™¨ä¸Šçš„éœ€è¦çš„åŠŸèƒ½éƒ½æ­£å¸¸ã€‚

```js [file.js]{2} meta-info=val
import App from './App.vue'
const app = createApp(App)
app.use(Vuetify)
app.use(Pinia)
app.mount('#app')
```

### app.mount api èªè­˜

```js [file.js]{2} meta-info=val
interface App {
  mount(rootContainer: Element | string): ComponentPublicInstance
}
```

* åƒæ•¸å¯ä»¥æ˜¯ä¸€ä¸ªå¯¦éš›çš„ DOM å…ƒç´ æˆ–ä¸€ä¸ª CSS é¸æ“‡å™¨ (ä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å…ƒç´ )ï¼Œæ‰€é¸æ“‡åˆ°è¿”å›æ ¹ç»„ä»¶çš„å¯¦ä¾‹ã€‚
åœ¨ç€è¦½å™¨é‹è¡Œç·¨è­¯éçš„jsæª”æ¡ˆæ™‚ï¼ŒæŒ‡å®šå®¹å™¨å…ƒç´ çš„ innerHTML å°‡è¢«ç”¨ä½œæ¨¡æ¿å¡«å……çš„ä½ç½®ã€‚ é è¨­æ˜¯ **id=appçš„divå®¹å™¨å…§innerHtml**ï¼ŒVueæœƒä»¥jsèª¿ç”¨ç€è¦½å™¨APIæ“ä½œç½®æ›æ‰ã€‚

* ä¸€å€‹appå¯¦ä¾‹ï¼Œé€šå¸¸åƒ…èƒ½èª¿ç”¨ä¸€æ¬¡ **mount** æ–¹æ³•ï¼Œæ›è¼‰vueå¯¦ä¾‹å¾Œï¼Œvueé‚„éœ€è¦è² è²¬ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€ç‹€æ…‹å’ŒéŸ¿æ‡‰æ•¸æ“šæ›´æ–°ã€‚å¦‚æœå¤šæ¬¡èª¿ç”¨  **mount** çš„å¯èƒ½é€ æˆä¸å¯é æœŸçš„äº¤äº’æ··äº‚ ã€‚

### å¤šé å¼æ‡‰ç”¨(Multiple Page Application, MPA)

é›–ç„¶èªªVue ä¸»è¦æ˜¯ä»¥å–®é å¼æ‡‰ç”¨SPAä½œç‚ºä¸»è¦æ‡‰ç”¨ï¼Œä½†ä¸¦ä¸æ˜¯èªªä¸èƒ½åšæˆå¤šé å¼æ‡‰ç”¨ ã€‚  
åªæ˜¯éœ€è¦åˆ©ç”¨createAppå‰µå»ºå¤šå€‹Vueå¯¦ä¾‹ï¼Œå¦‚åŒå®˜æ–¹æ‰€å»ºè­°çš„ã€‚

**MPAå°ˆæ¡ˆè³‡æ–™å¤¾**

```
project-root/
â”œâ”€ public/
â”‚  â”œâ”€ index.html
â”‚  â”œâ”€ about.html
â”œâ”€ src/
â”‚  â”œâ”€ main.js          // å°æ‡‰ index.html çš„å…¥å£æ–‡ä»¶
â”‚  â”œâ”€ about.js         // å°æ‡‰ about.html çš„å…¥å£æ–‡ä»¶
â”œâ”€ vite.config.js
```

åœ¨ä¸åŒæª”æ¡ˆä¸­å‰µå»ºä¸åŒçš„Vue App å¯¦ä¾‹

```
// main.js
const app1 = createApp({
  /* ... */
})
app1.mount('#container-1')

// about.js
const app2 = createApp({
  /* ... */
})
app2.mount('#container-2')
```

åœ¨Viteæ‰“åŒ…å…¥å£æª”çš„è¨­å®šï¼Œå¯ä»¥è¨­å®šä½¿æœ€çµ‚ç”¢ç‰©ç”¢å‡ºå¤šä»½htmlæª”æ¡ˆï¼Œå¯åƒè€ƒroll upæ–‡ä»¶  
<https://cn.rollupjs.org/configuration-options/#input>

```js [file.js]{2} meta-info=val
import { defineConfig } from 'vite';
import { resolve } from 'path';

export default defineConfig({
  build: {
    rollupOptions: {
      input: {
        main: resolve(__dirname, 'public/index.html'),
        about: resolve(__dirname, 'public/about.html')
      }
    }
  }
});
```

---

### Vue çš„æ ¸å¿ƒçµ„æˆ- compiler core vs runtime core

å› ç‚ºæ˜¯æ–°æ‰‹æ·±å…¥ç¯‡ï¼Œæ‰€ä»¥é™¤äº†å®˜ç¶²æ—¢å®šçš„ä»‹ç´¹å¤–ï¼Œé¡å¤–åŠ å…¥äº†vue æºç¢¼å°ˆæ¡ˆä¸Šï¼Œä»–å€‘å°packageçš„ç°¡ä»‹ï¼Œæ˜¯æ¡ç”¨monorepoå½¢å¼å»é–‹ç™¼vueæ¡†æ¶çš„ï¼Œä½ ä¸€å®šä¹Ÿç¨å¾®è½å€‹ **runtime core/compiler core** é€™å…©å€‹åè©ï¼Œå¯ä»¥è©¦è‘—æ‰“é–‹Vueçš„[github](https://github.com/vuejs/core/blob/v3.0.0-alpha.4/.github/contributing.md#project-structure){:target="_blank" rel="noopener noreferrer"}ç¨å¾®è§€å¯Ÿä¸€ä¸‹ã€‚

é‚£éº¼å°vueä¾†èªªç·¨è­¯å’Œé‹è¡Œé€™å…©å€‹æ ¸å¿ƒä¸»è¦è² è²¬ä»€éº¼å‘¢?

![ç·¨è­¯é‹è¡Œæ ¸å¿ƒ](/iron/iron-1-1.jpg "runtime vs compiler")
åœ¨ä½¿ç”¨ä¸Šæœ€å¤§çš„å€åˆ¥:

å¦‚æœä½ æ˜¯å‰›æ¥è§¸vueå°å®ƒçš„åŠŸèƒ½ä¸æ˜¯å¾ˆç†Ÿæ‚‰ä¹Ÿæ²’é—œä¿‚ï¼Œå…ˆç†è§£æ ¸å¿ƒå¥—ä»¶æœƒè² è²¬é€™é …é …ç›®å°±è¡Œï¼Œç”¨åˆ°å†å›é¡§ä¹Ÿè¡Œã€‚

* **é‹è¡Œå™¨æ ¸å¿ƒ (Runtime Core)**  
 Runtime Core æ˜¯ Vue.js åœ¨ç€è¦½å™¨ä¸­é‹è¡Œçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå…¶æª”æ¡ˆé«”ç©è¼ƒå°ï¼Œå°ˆæ³¨æ–¼é‹è¡Œæ™‚çš„åŠŸèƒ½ã€‚é€šå¸¸æŒ‡çš„æ˜¯é€šé Vue CLI æˆ– Vite æ‰“åŒ…å¾Œçš„ JavaScript æª”æ¡ˆï¼Œé€™äº›æª”æ¡ˆåœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œã€‚ç•¶æˆ‘å€‘åœ¨ç¶²é ä¸Šèˆ‡ Vue æ‡‰ç”¨äº’å‹•ã€è§¸ç™¼è³‡æ–™æ›´æ–°æ™‚ï¼ŒRuntime Core æœƒè² è²¬éŸ¿æ‡‰å¼ç³»çµ±ã€çµ„ä»¶æ¸²æŸ“å’Œè™›æ“¬ DOM çš„æ›´æ–°æ“ä½œï¼Œå¾è€Œå¯¦ç¾è³‡æ–™å’Œç•«é¢åŒæ­¥æ›´æ–°ã€‚

 1. **å‰µå»ºå’Œç®¡ç†å…ƒä»¶çš„å¯¦ä¾‹(instance)**ï¼š è™•ç†å…ƒä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆå§‹åŒ–æ•¸æ“šå’Œå…§éƒ¨å‡½å¼æ–¹æ³•ç­‰ã€‚
 2. **éŸ¿æ‡‰å¼ç³»ç»Ÿçš„æ“ä½œ**ï¼š ç›£æ§æ•¸æ“šçš„è®ŠåŒ–ä¸¦é€£çµç›¸é—œæœ‰ç”¨åˆ°è©²è³‡æ–™çš„å‰¯ä½œç”¨effectï¼Œä¸¦è‡ªå‹•æ›´æ–° Virtual DOMã€‚
 3. **æ›´æœ‰æ•ˆç‡çš„DOM æ“ä½œ**ï¼š è™›æ“¬DOM(virtual DOM)æ¯”å°å‰å¾Œæ›´æ–°å·®ç•°(differ)ï¼Œå†å»èª¿ç”¨è² è²¬çš„DOM APIæ›´æ–°ç•«é¢(patch)ã€‚

 > æ›´æœ‰æ•ˆç‡çš„DOMæ“ä½œä¸ä»£è¡¨æ¡†æ¶ä½¿ç”¨ï¼Œé æ¯”ä½¿ç”¨åŸç”ŸJS DOMæ“ä½œä¾†çš„ä¾¿å®œï¼Œç«¯çœ‹æ‡‰ç”¨è¦æ¨¡ï¼ŒVirtual DOMå»ºç«‹å’Œé‹ç®—ä¹Ÿéœ€è€—è²»è³‡æºï¼Œå–æ±ºæ–¼å•†æ¥­é‚è¼¯è¤‡é›œåº¦ç›¸è¼ƒä¹‹ä¸‹å€¼ä¸å€¼å¾—ã€‚

* **ç·¨è­¯å™¨æ ¸å¿ƒ (Compiler Core)**

1. ç·¨è­¯å™¨æ ¸å¿ƒé€šå¸¸ä¸»è¦è² è²¬å°‡Vueæ¨¡æ¿(template)ç·¨è­¯æˆç‚ºJSæ¸²æŸ“å‡½æ•¸(render function)ï¼Œ  
  å¯ä»¥æƒ³åƒæˆVueé–‹ç™¼å®Œæˆå¾Œæœ€çµ‚è¦åŸ·è¡Œçš„ç¬¬ä¸€ä»½JS codeã€‚
2. æˆ‘å€‘é€šå¸¸ä¸æœƒåœ¨ç€è¦½å™¨åŸ·è¡Œç’°å¢ƒä¸­åŸ·è¡Œç·¨è­¯ï¼Œå› ç‚ºæª”æ¡ˆé«”ç©æ¯”è¼ƒå¤§ä¹Ÿæœƒå½±éŸ¿é€Ÿåº¦ï¼Œé€šå¸¸æ˜¯npm run buildéœ€è¦æ‰“åŒ…æ§‹å»ºjsæª”ï¼Œ  
  æˆ–æ˜¯ä½ åœ¨æœ¬åœ°é–‹ç™¼ç’°å¢ƒä¸­ä¿®æ”¹ç¨‹å¼ç¢¼æ™‚ï¼Œnpm run dev/npm run serve(vue-cli)ï¼Œç†±é‡è¼‰æ¨¡å¼(HMR)å¹«ä½ é‡æ–°ç·¨è­¯ç”Ÿæˆæ–°çš„JSä»£ç¢¼ã€‚
3. templateæ¨¡æ¿è§£æï¼š vue tempalteæ¨¡æ¿é€éASTæŠ½è±¡æ¨¹è½‰ç‚ºjsæ¸²æŸ“å‡½æ•¸(æœ‰èˆˆè¶£å¯ä»¥å»æœå°‹vue tamplateæœ€çµ‚åˆ°åº•æœƒè®Šæˆä»€éº¼ï¼Œå¾ŒçºŒè¨è«–ä¹Ÿæœƒç´å…¥)

### CSS é è™•ç†å™¨

CSS é è™•ç†çš„éç¨‹ä¸¦ä¸æ˜¯ Vue ç·¨è­¯å™¨çš„è·è²¬ï¼Œè€Œæ˜¯ç”±æ§‹å»ºå·¥å…·ï¼ˆå¦‚ Webpackã€Viteï¼‰å’Œå°æ‡‰çš„ Loaderï¼ˆå¦‚ sass-loaderã€less-loader ç­‰ï¼‰ä¾†è™•ç†çš„ã€‚

Vue ç·¨è­¯å™¨ä¸»è¦è™•ç†çš„æ˜¯ Vue ç‰¹æœ‰çš„æ¨¡æ¿èªæ³•ï¼Œè€Œ CSS é è™•ç†ã€JavaScript æ¨¡çµ„æ‰“åŒ…ç­‰å‰‡ç”±æ§‹å»ºå·¥å…·ï¼ˆå¦‚ Webpack æˆ– Viteï¼‰è² è²¬ã€‚æ§‹å»ºå·¥å…·é€šéé…ç½®ä¸åŒçš„ Loader æˆ– Plugin ä¾†è™•ç†å„ç¨®è³‡æºæ–‡ä»¶çš„ç·¨è­¯å’Œæ‰“åŒ…ã€‚

Webpack ä¸­çš„ Vue Loaderï¼šéœ€è¦é…ç½® Vue Loader ä¸¦å®‰è£ç›¸é—œæ’ä»¶ï¼Œç‰¹åˆ¥æ˜¯åœ¨ä½¿ç”¨ CSS é è™•ç†å™¨æ™‚ï¼Œéœ€è¦ç›¸æ‡‰çš„ Loader é…ç½®ã€‚
Vite çš„ Vue æ”¯æŒï¼šVite å·²ç¶“å…§å»ºå° Vue çš„æ”¯æŒï¼Œåªéœ€ç°¡å–®é…ç½®æ’ä»¶å³å¯ã€‚

```js [file.js]{2} meta-info=val
// vite.config.js
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';

export default defineConfig({
  plugins: [vue()]
});
```

---

### ç¸½çµ

æŒ‘äº†ä¸‹é¢é€™å¼µåœ–åšæœ¬æ¬¡endingï¼Œæ•´å€‹Vueå­¸ç¿’ä¹Ÿæ˜¯ç’°ç¹è‘—å®ƒï¼Œä¹‹å¾Œä¹Ÿæœƒå¸¸å¸¸å‡ºç¾ã€‚  

createAppå¾Œåˆ°app.mounté€™ä¸­é–“éç¨‹ï¼Œå…¶å¯¦é‚„å¤¾è‘—é€™å¼µåœ–ä¸€å¤§æ®µæµç¨‹ã€‚

å®˜æ–¹æ˜¯æ“ºåœ¨é€²éšçš„æ¸²æŸ“æ©Ÿåˆ¶(Rendering Mechanism)åšä»‹ç´¹ï¼Œä¸éæœ¬æ¬¡ç« ç¯€å·²ç¶“æœ‰è§¸ç¢°åˆ°App.vueå…ƒä»¶æª”(template)çš„æ›å…¥ï¼Œåˆ°app.mount -> Actual DOMçš„ä¸€äº›ä»‹ç´¹ï¼Œç®—æ˜¯å€‹é–‹é ­ï¼Œå¾ŒçºŒé€²å…¥å…ƒä»¶åŒ–é–‹ç™¼(SFC file component)ã€éŸ¿æ‡‰å¼è³‡æ–™å’Œè™›æ“¬DOM(Virtual DOM)ç ”ç©¶å›‰ã€‚

![ç¸½çµåœ–](/iron/iron-1-2.jpg "resume")
